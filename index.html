<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Quick Access</title>
  <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png" onerror="this.href='https://placehold.co/16x16/3a86ff/ffffff?text=QA'">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png" onerror="this.href='https://placehold.co/32x32/3a86ff/ffffff?text=QA'">
  <link rel="icon" type="image/x-icon" href="/favicons/favicon.ico" onerror="this.href='https://placehold.co/32x32/3a86ff/ffffff?text=QA'">
  <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png" onerror="this.href='https://placehold.co/180x180/3a86ff/ffffff?text=QA'">
  <link rel="manifest" href="/favicons/site.webmanifest">

  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
  />
  <style>
    :root {
      --primary-color: #3a86ff;
      --primary-hover: #2563eb;
      --dark-color: #1e293b;
      --light-color: #f8fafc;
      --accent-color: #fb7185;
      --grey-light: #e2e8f0;
      --grey-dark: #3576d1; /* Adjusted from #64748b for better contrast on light bg if needed */
      --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      --transition: all 0.3s ease;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: var(--light-color);
      color: var(--dark-color);
      line-height: 1.6;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }

    /* Header & Navigation */
    header {
      background-color: var(--dark-color);
      padding: 1rem 0;
      position: sticky;
      top: 0;
      z-index: 1000;
      box-shadow: var(--shadow);
    }

    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--light-color);
      text-decoration: none;
      display: flex;
      align-items: center;
    }

    .logo i {
      margin-right: 10px;
      color: var(--accent-color);
    }

    .nav-menu {
      display: flex;
      gap: 1.5rem;
      align-items: center;
      list-style-type: none; /* Remove bullet points globally for nav-menu */
    }

    .nav-item {
      position: relative;
    }

    .nav-link {
      color: var(--light-color);
      text-decoration: none;
      font-weight: 500;
      padding: 0.5rem 1rem;
      border-radius: 4px;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .nav-link:hover {
      background-color: rgba(255, 255, 255, 0.1);
    }

    .dropdown-content {
      display: none;
      position: absolute;
      left: 0;
      top: 100%;
      background-color: white;
      min-width: 250px;
      border-radius: 8px;
      box-shadow: var(--shadow);
      z-index: 1;
      overflow: hidden; /* Changed from overflow-y: auto to hidden, parent will scroll */
      max-height: 400px; /* Max height for desktop dropdown */
      overflow-y: auto; /* Allow individual dropdowns to scroll if content is too long */
    }

    .subtopic h3 {
      color: var(--primary-color);
      margin: 10px 0 5px;
      font-size: 1rem;
      font-weight: 600;
      padding: 5px 16px;
    }

    .dropdown-content a {
      color: var(--dark-color);
      padding: 10px 16px;
      text-decoration: none;
      display: block;
      transition: var(--transition);
      font-size: 0.9rem;
    }

    .dropdown-content a:hover {
      background-color: var(--grey-light);
      color: var(--primary-color);
    }

    .nav-item.active .dropdown-content {
      display: block;
    }

    .mobile-menu-btn {
      display: none;
      background: none;
      border: none;
      color: white;
      font-size: 1.5rem;
      cursor: pointer;
    }

    /* Search Section */
    .search-section {
      background-color: white;
      padding: 2rem 0;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    }

    .search-container {
      max-width: 700px;
      margin: 0 auto;
    }

    .search-bar {
      display: flex;
      box-shadow: var(--shadow);
      border-radius: 50px;
      overflow: hidden;
      border: 1px solid var(--grey-light);
    }

    .search-bar input {
      flex: 1;
      padding: 15px 20px;
      border: none;
      outline: none;
      font-size: 1rem;
    }

    .search-bar button {
      background-color: var(--primary-color);
      color: white;
      border: none;
      padding: 0 25px;
      cursor: pointer;
      transition: var(--transition);
      font-size: 1rem;
    }

    .search-bar button:hover {
      background-color: var(--primary-hover);
    }

    .search-results {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 15px;
      margin-top: 20px;
    }

    .result-button {
      background-color: white;
      color: var(--dark-color);
      padding: 15px;
      text-align: center;
      text-decoration: none;
      font-size: 0.9rem;
      border-radius: 8px;
      transition: var(--transition);
      border: 1px solid var(--grey-light);
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      word-break: break-word; /* Ensure long text wraps */
    }

    .result-button i {
      color: var(--primary-color);
      flex-shrink: 0; /* Prevent icon from shrinking */
    }

    .result-button:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      color: var(--primary-color);
      border-color: var(--primary-color);
    }

    /* Media Queries */
    @media (max-width: 768px) {
      .mobile-menu-btn {
        display: block;
      }

      .nav-menu {
        position: fixed;
        top: 60px; /* Height of the header, ensure this matches actual header height */
        right: -100%; /* Start off-screen */
        flex-direction: column;
        background-color: var(--dark-color);
        width: 80%; /* Or a preferred width like 280px */
        max-width: 300px; /* Max width for mobile menu */
        height: calc(100vh - 60px); /* Full available height minus header */
        z-index: 999;
        padding-top: 20px;
        padding-bottom: 20px; /* Add padding at the bottom */
        transition: right 0.3s ease; /* Animate only the 'right' property */
        align-items: flex-start;
        list-style-type: none; /* Explicitly remove bullet points for mobile menu */
        overflow-y: auto; /* Enable scrolling for the entire mobile menu if content overflows */
      }

      .nav-menu.active {
        right: 0; /* Slide in from the right */
      }

      .nav-item {
        width: 100%;
      }

      .nav-link {
        width: 100%;
        padding: 15px 20px;
        border-radius: 0;
        justify-content: space-between; /* Pushes chevron to the end */
      }
      .nav-link:hover {
        background-color: rgba(255, 255, 255, 0.2); /* Slightly more visible hover for mobile */
      }


      .dropdown-content {
        position: static; /* Makes it flow in document order */
        display: none; /* Keep it hidden by default */
        width: 100%;
        box-shadow: none;
        border-radius: 0;
        background-color: rgba(0,0,0,0.2); /* Slightly darker to distinguish from parent */
        max-height: none; /* Allow it to take full height needed */
        overflow-y: visible; /* Let parent .nav-menu handle scrolling */
      }
      
      .nav-item.active .dropdown-content {
         display: block; /* Show when parent .nav-item is active */
      }

      .dropdown-content a {
        padding: 12px 20px 12px 30px; /* Indent sub-items */
        font-size: 0.85rem;
        color: var(--light-color); /* Ensure sub-item links are visible on dark background */
      }
       .subtopic h3 {
        padding: 10px 20px 5px 20px; /* Adjust padding for mobile */
        font-size: 0.9rem;
        color: var(--grey-light);
      }


      .search-results {
        grid-template-columns: 1fr; /* Single column for search results on mobile */
      }
      .search-bar input {
        padding: 12px 15px;
        font-size: 0.9rem;
      }
      .search-bar button {
        padding: 0 20px;
        font-size: 0.9rem;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <nav class="navbar">
        <a href="#home" class="logo">
          <i class="fas fa-stream"></i>
          <span>QuickNav</span>
        </a>

        <button class="mobile-menu-btn" id="menuToggle" aria-label="Toggle menu" aria-expanded="false" aria-controls="navMenu">
          <i class="fas fa-bars"></i>
        </button>

        <ul class="nav-menu" id="navMenu">
          </ul>
      </nav>
    </div>
  </header>

  <section class="search-section">
    <div class="container">
      <div class="search-container">
        <div class="search-bar">
          <input
            type="text"
            id="searchInput"
            placeholder="Search for links..."
            onkeydown="if (event.key === 'Enter') searchFunction()"
          />
          <button type="button" onclick="searchFunction()" aria-label="Search">
            <i class="fas fa-search"></i> Search
          </button>
        </div>
        <div class="search-results" id="searchResults">
          </div>
      </div>
    </div>
  </section>

  <script>
    const menuData = {
  "topics": [
    {
      "name": "Home",
      "pages": [
        {
          "name": "Dashboard",
          "url": "#home",
          "icon": "fa-home"
        }
      ]
    },
    {
      "name": "Tools",
      "icon": "fa-tools",
      "subtopics": [
        {
          "name": "Originals",
          "pages": [
            {
              "name": "CPS Test",
              "url": "https://bw4s.dpdns.org/cps/",
              "icon": "fa-mouse-pointer"
            },
            {
              "name": "QR Code",
              "url": "https://bw4s.dpdns.org/qrcode/",
              "icon": "fa-qrcode"
            },
            {
              "name": "Score Script",
              "url": "https://bw4s.dpdns.org/score/",
              "icon": "fa-clipboard-list"
            },
            {
              "name": "Color Picker",
              "url": "https://bw4s.dpdns.org/color/",
              "icon": "fa-palette"
            },
            {
              "name": "Nav Editor",
              "url": "https://bw4s.dpdns.org/navEditor/",
              "icon": "fa-edit"
            }
          ]
        },
        {
          "name": "Hosted Apps",
          "pages": [
            {
              "name": "Render Test",
              "url": "https://bw4s.dpdns.org/render/",
              "icon": "fa-server"
            }
          ]
        }
      ]
    },
    {
      "name": "Experiments",
      "icon": "fa-flask",
      "pages": [
        {
          "name": "NN",
          "url": "https://bw4s.dpdns.org/nn/",
          "icon": "fa-brain"
        },
        {
          "name": "PTCG",
          "url": "https://bw4s.dpdns.org/ptcg/",
          "icon": "fa-gamepad"
        },
        {
          "name": "English Helper",
          "url": "https://bw4s.dpdns.org/english/",
          "icon": "fa-language"
        }
      ]
    },
    {
      "name": "Creations",
      "icon": "fa-paint-brush",
      "subtopics": [
        {
          "name": "Originals",
          "pages": [
            {
              "name": "HappyBirthdayWinter",
              "url": "https://bw4s.dpdns.org/HappyBirthdayWinter/",
              "icon": "fa-birthday-cake"
            },
            {
              "name": "Capsule Wallpaper",
              "url": "https://bw4s.dpdns.org/capsuleWallpaper/",
              "icon": "fa-image"
            },
            {
              "name": "GeoArt",
              "url": "https://bw4s.dpdns.org/geoart/",
              "icon": "fa-shapes"
            },
            {
              "name": "Cue Cards",
              "url": "https://bw4s.dpdns.org/cue/",
              "icon": "fa-layer-group"
            }
          ]
        },
        {
          "name": "Hosted",
          "pages": [
            {
              "name": "JS Animation",
              "url": "https://bw4s.dpdns.org/animation/",
              "icon": "fa-film"
            }
          ]
        }
      ]
    },
    {
      "name": "Others",
      "icon": "fa-ellipsis-h",
      "subtopics": [
        {
          "name": "Archived/Canceled",
          "pages": [
            {
              "name": "Old Notes",
              "url": "https://bw4s.dpdns.org/note/",
              "icon": "fa-archive"
            },
            {
              "name": "LLM",
              "url": "https://9aab-1-168-28-217.ngrok-free.app/",
              "icon": "fa-robot"
            },
            {
              "name": "Skin Viewer",
              "url": "https://bw4s.dpdns.org/skin/",
              "icon": "fa-user-astronaut"
            }
          ]
        },
        {
          "name": "Games (Hosted)",
          "pages": [
            {
              "name": "Cube",
              "url": "https://bw4s.dpdns.org/cube/",
              "icon": "fa-cube"
            },
            {
              "name": "Track Not Found",
              "url": "https://bw4s.dpdns.org/track-not-found/",
              "icon": "fa-ghost"
            }
          ]
        }
      ]
    }
  ]
};

    function createMenu() {
      const navMenu = document.getElementById('navMenu');
      navMenu.innerHTML = ''; // Clear existing menu items

      menuData.topics.forEach(topic => {
        const li = document.createElement('li');
        li.className = 'nav-item';

        // Main link for the topic
        const link = document.createElement('a');
        link.className = 'nav-link';
        
        let topicIconHtml = '';
        if (topic.icon) {
            topicIconHtml = `<i class="fas ${topic.icon}" style="margin-right: 8px;"></i>`;
        }

        // If it's a simple link (e.g., Home) or has pages but no subtopics
        if (!topic.subtopics && topic.pages && topic.pages.length === 1 && topic.pages[0].name.toLowerCase() === topic.name.toLowerCase()) {
            link.href = topic.pages[0].url;
            link.innerHTML = topicIconHtml + `<span>${topic.name}</span>`;
        } else { // It's a dropdown
            link.href = '#'; // Prevent navigation for dropdown toggles
            link.innerHTML = topicIconHtml + `<span>${topic.name}</span> <i class="fas fa-chevron-down dropdown-indicator"></i>`;
        }
        li.appendChild(link);

        // Create dropdown content if there are subtopics or multiple pages under a topic
        if (topic.subtopics || (topic.pages && topic.pages.length > 0 && !(topic.pages.length === 1 && topic.pages[0].name.toLowerCase() === topic.name.toLowerCase()) )) {
          const dropdown = document.createElement('div');
          dropdown.className = 'dropdown-content';

          if (topic.subtopics) {
            topic.subtopics.forEach(subtopic => {
              const subtopicDiv = document.createElement('div');
              subtopicDiv.className = 'subtopic';

              const h3 = document.createElement('h3');
              h3.textContent = subtopic.name;
              subtopicDiv.appendChild(h3);

              subtopic.pages.forEach(page => createPageLink(page, subtopicDiv));
              dropdown.appendChild(subtopicDiv);
            });
          } else if (topic.pages) { // Handle topics with direct pages (no subtopics)
            // This case is for topics that are not "Home-like" but have direct pages.
            // Example: "Experiments" topic
            topic.pages.forEach(page => createPageLink(page, dropdown));
          }
          li.appendChild(dropdown);
        }
        navMenu.appendChild(li);
      });
    }

    function createPageLink(page, parentElement) {
      const a = document.createElement('a');
      a.href = page.url;
      a.target = page.url.startsWith('http') ? '_blank' : '_self'; // Open external links in new tab
      if (page.url.startsWith('http')) {
          a.rel = "noopener noreferrer";
      }

      let iconHtml = '';
      if (page.icon) {
          iconHtml = `<i class="fas ${page.icon}" style="margin-right: 8px; width: 16px; text-align: center;"></i>`;
      } else {
          iconHtml = `<i class="fas fa-link" style="margin-right: 8px; width: 16px; text-align: center;"></i>`; // Default icon
      }
      a.innerHTML = iconHtml + page.name;
      parentElement.appendChild(a);
    }


    function attachSubmenuToggle() {
      const navItems = document.querySelectorAll('.nav-item');

      // Close all dropdowns when clicking outside
      document.addEventListener('click', (e) => {
        if (!e.target.closest('.nav-item')) {
          navItems.forEach(item => {
            item.classList.remove('active');
            const indicator = item.querySelector('.dropdown-indicator');
            if (indicator) indicator.classList.replace('fa-chevron-up', 'fa-chevron-down');
          });
        }
      });

      navItems.forEach(item => {
        const link = item.querySelector('.nav-link');
        const dropdown = item.querySelector('.dropdown-content');
        const indicator = link.querySelector('.dropdown-indicator');

        if (dropdown) { // Only add listener if it's a dropdown
          link.addEventListener('click', (e) => {
            e.preventDefault(); // Prevent default anchor behavior
            e.stopPropagation(); // Stop click from bubbling to document listener

            const isActive = item.classList.contains('active');

            // Close other active dropdowns
            navItems.forEach(otherItem => {
              if (otherItem !== item) {
                otherItem.classList.remove('active');
                const otherIndicator = otherItem.querySelector('.dropdown-indicator');
                if (otherIndicator) otherIndicator.classList.replace('fa-chevron-up', 'fa-chevron-down');
              }
            });

            // Toggle current item
            item.classList.toggle('active', !isActive);
            if (indicator) {
              indicator.classList.toggle('fa-chevron-down', isActive);
              indicator.classList.toggle('fa-chevron-up', !isActive);
            }
          });
        }
      });
    }
    
    // Mobile menu toggle
    const menuToggle = document.getElementById('menuToggle');
    const navMenu = document.getElementById('navMenu');

    menuToggle.addEventListener('click', (e) => {
      e.stopPropagation(); // Prevent click from closing menu immediately
      const isActive = navMenu.classList.toggle('active');
      menuToggle.setAttribute('aria-expanded', isActive.toString());
      menuToggle.innerHTML = isActive
        ? '<i class="fas fa-times"></i>'
        : '<i class="fas fa-bars"></i>';
    });

    // Close mobile menu when a link inside it is clicked
    navMenu.addEventListener('click', (e) => {
        // Check if the clicked element is an anchor tag and not a dropdown toggle
        if (e.target.tagName === 'A' && e.target.getAttribute('href') !== '#') {
            if (window.innerWidth <= 768) { // Only on mobile
                navMenu.classList.remove('active');
                menuToggle.setAttribute('aria-expanded', 'false');
                menuToggle.innerHTML = '<i class="fas fa-bars"></i>';
                // Reset any open dropdowns within the mobile menu
                navMenu.querySelectorAll('.nav-item.active').forEach(item => {
                    item.classList.remove('active');
                    const indicator = item.querySelector('.dropdown-indicator');
                    if (indicator) indicator.classList.replace('fa-chevron-up', 'fa-chevron-down');
                });
            }
        }
        // If it's a dropdown toggle link (href="#"), the submenu toggle logic will handle it.
    });


    function searchFunction() {
      const input = document.getElementById('searchInput');
      const filter = input.value.toLowerCase().trim();
      const resultsContainer = document.getElementById('searchResults');
      resultsContainer.innerHTML = ''; // Clear previous results

      if (filter === '') {
        return; // Don't search if input is empty
      }

      let foundResults = 0;
      const addedUrls = new Set(); // To track added URLs and prevent duplicates

      menuData.topics.forEach(topic => {
        if (topic.subtopics) {
          topic.subtopics.forEach(subtopic => {
            subtopic.pages.forEach(page => {
              if ((page.name.toLowerCase().includes(filter) || (page.url && page.url.toLowerCase().includes(filter))) && !addedUrls.has(page.url)) {
                createResultButton(page, resultsContainer);
                addedUrls.add(page.url);
                foundResults++;
              }
            });
          });
        }
        if (topic.pages) {
          topic.pages.forEach(page => {
            // Check if this page is part of a subtopic (already processed) or a direct page under a topic
            const isDirectPageNotUnderSubtopic = !topic.subtopics; 
            // Or, if it's a page directly under a topic that also has subtopics (less common, but possible)
            // This check ensures we don't re-add pages if they are listed both directly and under subtopics (though the current data structure doesn't do this)

            if ((page.name.toLowerCase().includes(filter) || (page.url && page.url.toLowerCase().includes(filter))) && !addedUrls.has(page.url)) {
              createResultButton(page, resultsContainer);
              addedUrls.add(page.url);
              foundResults++;
            }
          });
        }
      });

      if (foundResults === 0) {
        const noResults = document.createElement('div');
        noResults.style.gridColumn = '1 / -1'; // Span full width if grid
        noResults.style.textAlign = 'center';
        noResults.style.padding = '20px';
        noResults.style.color = 'var(--grey-dark)';
        noResults.innerHTML = `
          <i class="fas fa-meh" style="font-size: 2rem; margin-bottom: 10px; color: var(--grey-light);"></i><br>
          No results found for "<strong>${input.value}</strong>"
        `;
        resultsContainer.appendChild(noResults);
      }
    }

    function createResultButton(page, container) {
      const resultButton = document.createElement('a');
      resultButton.href = page.url;
      resultButton.className = 'result-button';
      resultButton.target = page.url.startsWith('http') ? '_blank' : '_self';
       if (page.url.startsWith('http')) {
          resultButton.rel = "noopener noreferrer";
      }

      let iconHtml = '';
      if (page.icon) {
          iconHtml = `<i class="fas ${page.icon}"></i>`;
      } else {
          iconHtml = `<i class="fas fa-link"></i>`; // Default icon
      }
      
      const textSpan = document.createElement('span');
      textSpan.textContent = page.name;

      resultButton.innerHTML = iconHtml; // Add icon first
      resultButton.appendChild(textSpan); // Then add text

      container.appendChild(resultButton);
    }


    // Initialize menu and event listeners
    document.addEventListener('DOMContentLoaded', () => {
      createMenu();
      attachSubmenuToggle();
      // Initial search if there's a hash for it (optional)
      // if(window.location.hash.startsWith('#search=')) {
      //   document.getElementById('searchInput').value = decodeURIComponent(window.location.hash.substring(8));
      //   searchFunction();
      // }
    });

  </script>
</body>
</html>
